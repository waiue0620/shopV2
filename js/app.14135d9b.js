(function(t){function e(e){for(var n,a,u=e[0],i=e[1],s=e[2],d=0,p=[];d<u.length;d++)a=u[d],c[a]&&p.push(c[a][0]),c[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);m&&m(e);while(p.length)p.shift()();return r.push.apply(r,s||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,a=1;a<o.length;a++){var u=o[a];0!==c[u]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},a={app:0},c={app:0},r=[];function u(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-025ab6b5":"744a65ec","chunk-0054c75f":"6db479d9","chunk-0d6e5364":"47090f46","chunk-2d0ae5d6":"8916c7ba","chunk-ccf3f878":"a13435d3","chunk-f88219e0":"446a003e","chunk-5a500459":"0fd84d08","chunk-665f1ce8":"a2d8328e","chunk-7933d8b0":"51f4fa41","chunk-1be94440":"4db206e9","chunk-2d0c0e84":"04e51fa6","chunk-2d0d76ff":"aadbb291","chunk-2d2089e1":"778c86ba","chunk-47ab2ce0":"fe277225","chunk-7a6cd35e":"6c016b23"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(t){var e=[],o={"chunk-025ab6b5":1,"chunk-0054c75f":1,"chunk-0d6e5364":1,"chunk-ccf3f878":1,"chunk-f88219e0":1,"chunk-5a500459":1,"chunk-665f1ce8":1,"chunk-1be94440":1};a[t]?e.push(a[t]):0!==a[t]&&o[t]&&e.push(a[t]=new Promise(function(e,o){for(var n="css/"+({}[t]||t)+"."+{"chunk-025ab6b5":"87b515ef","chunk-0054c75f":"202f36a1","chunk-0d6e5364":"3dadd985","chunk-2d0ae5d6":"31d6cfe0","chunk-ccf3f878":"9d9cb7f5","chunk-f88219e0":"c07063d4","chunk-5a500459":"09430202","chunk-665f1ce8":"8ee225c2","chunk-7933d8b0":"31d6cfe0","chunk-1be94440":"a383c5ff","chunk-2d0c0e84":"31d6cfe0","chunk-2d0d76ff":"31d6cfe0","chunk-2d2089e1":"31d6cfe0","chunk-47ab2ce0":"31d6cfe0","chunk-7a6cd35e":"31d6cfe0"}[t]+".css",c=i.p+n,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var s=r[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===n||d===c))return e()}var p=document.getElementsByTagName("style");for(u=0;u<p.length;u++){s=p[u],d=s.getAttribute("data-href");if(d===n||d===c)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var n=e&&e.target&&e.target.src||c,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete a[t],m.parentNode.removeChild(m),o(r)},m.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(m)}).then(function(){a[t]=0}));var n=c[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,o){n=c[t]=[e,o]});e.push(n[2]=r);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(t),s=function(e){d.onerror=d.onload=null,clearTimeout(p);var o=c[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+n+": "+a+")");r.type=n,r.request=a,o[1](r)}c[t]=void 0}};var p=setTimeout(function(){s({type:"timeout",target:d})},12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/shopV2/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var m=d;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),a=o("bc3a"),c=o.n(a),r=o("a7fe"),u=o.n(r),i=o("9062"),s=o.n(i),d=(o("e40d"),o("4989"),o("7bb1")),p=o("427f"),m=o.n(p),h=o("a925"),l=o("7212"),f=o.n(l),g=(o("dfa4"),o("2f62")),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},k=[],b={name:"App"},O=b,A=(o("5c0b"),o("2877")),I=Object(A["a"])(O,v,k,!1,null,null,null),D=I.exports,N=o("8c4f");n["a"].use(N["a"]);var L=new N["a"]({base:"/shopV2/",linkActiveClass:"active",routes:[{path:"*",redirect:"index"},{path:"/",name:"home",redirect:"index",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-0054c75f")]).then(o.bind(null,"bb51"))},children:[{path:"index",name:"index",component:function(){return o.e("chunk-5a500459").then(o.bind(null,"86d6"))}},{path:"shopping",name:"shopping",component:function(){return Promise.all([o.e("chunk-7933d8b0"),o.e("chunk-1be94440")]).then(o.bind(null,"bb63"))}}]},{path:"/detailed/:productId",name:"detailed",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-ccf3f878")]).then(o.bind(null,"e7f2"))}},{path:"/check_order/:orderId",name:"checkOrder",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-f88219e0")]).then(o.bind(null,"a92a"))}},{path:"/customer",name:"customer",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-0d6e5364")]).then(o.bind(null,"4848"))}},{path:"/login",name:"login",component:function(){return o.e("chunk-665f1ce8").then(o.bind(null,"a55b"))}},{path:"/admin",name:"Dashboard",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-2d0ae5d6")]).then(o.bind(null,"0a6e"))},children:[{path:"products",name:"products",component:function(){return Promise.all([o.e("chunk-7933d8b0"),o.e("chunk-2d0d76ff")]).then(o.bind(null,"778a"))},meta:{requiresAuth:!0}},{path:"orders",name:"orders",component:function(){return Promise.all([o.e("chunk-7933d8b0"),o.e("chunk-2d0c0e84")]).then(o.bind(null,"447e"))},meta:{requiresAuth:!0}},{path:"coupons",name:"coupons",component:function(){return Promise.all([o.e("chunk-7933d8b0"),o.e("chunk-47ab2ce0")]).then(o.bind(null,"151c"))},meta:{requiresAuth:!0}}]},{path:"/",name:"Dashboard",component:function(){return Promise.all([o.e("chunk-025ab6b5"),o.e("chunk-2d0ae5d6")]).then(o.bind(null,"0a6e"))},children:[{path:"customer_order",name:"customerOrder",component:function(){return Promise.all([o.e("chunk-7933d8b0"),o.e("chunk-2d2089e1")]).then(o.bind(null,"a60f"))}},{path:"Customer_checkout/:orderId",name:"CustomerCheckout",component:function(){return o.e("chunk-7a6cd35e").then(o.bind(null,"bd69"))}}]}]});n["a"].prototype.$bus=new n["a"];o("a481"),o("c5f6");var P=function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,function(t,e,o){var n=e&&"."!==t&&(o.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return n}))},G=function(t){var e=new Date(1e3*t);return e.toLocaleDateString()},C={strict:!0,namespaced:!0,state:{products:[],categories:[],product:{}},actions:{getProducts:function(t){var e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/products/all");t.commit("LOADING",!0,{root:!0}),c.a.get(e).then(function(e){t.commit("PRODUCTS",e.data.products),t.commit("LOADING",!1,{root:!0})})},getProduct:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/product/").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.get(o).then(function(e){t.commit("PRODUCT",e.data.product),t.commit("LOADING",!1,{root:!0})})}},mutations:{PRODUCTS:function(t,e){t.products=e},PRODUCT:function(t,e){t.product=e}},getters:{categories:function(t){return t.categories},products:function(t){return t.products},product:function(t){return t.product}}},M={strict:!0,namespaced:!0,state:{cart:{carts:[]},order:{user:{}}},actions:{getCart:function(t){var e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart");c.a.get(e).then(function(e){t.commit("CART",e.data.data)})},addtoCart:function(t,e){var o=e.id,n=e.qty,a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart");t.commit("LOADINGITEM",o,{root:!0});var r={product_id:o,qty:n};c.a.post(a,{data:r}).then(function(e){t.commit("LOADINGITEM","",{root:!0}),t.dispatch("getCart"),t.dispatch("alertModules/message",e,{root:!0})})},createOrder:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/order");t.commit("LOADING",!0,{root:!0}),c.a.post(o,{data:e}).then(function(e){e.data.success&&L.push("/check_order/".concat(e.data.orderId)),t.dispatch("alertModules/message",e,{root:!0})}),t.commit("LOADING",!1,{root:!0})},addCouponCode:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/coupon");t.commit("LOADING",!0,{root:!0});var n={code:e};c.a.post(o,{data:n}).then(function(e){t.dispatch("getCart"),t.dispatch("alertModules/message",e,{root:!0}),t.commit("LOADING",!1,{root:!0})})},removeCartItem:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart/").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.delete(o).then(function(e){t.dispatch("getCart"),console.log(e),t.commit("LOADING",!1,{root:!0}),t.dispatch("alertModules/message",e,{root:!0})})},getOrder:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/order/").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.get(o).then(function(e){t.commit("ORDER",e.data.order),console.log(e),t.commit("LOADING",!1,{root:!0})})},payOrder:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/pay/").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.post(o).then(function(o){console.log(o),o.data.success&&t.dispatch("getOrder",e),t.commit("LOADING",!1,{root:!0}),t.dispatch("alertModules/message",o,{root:!0})})}},mutations:{CART:function(t,e){t.cart=e},ORDER:function(t,e){t.order=e}},getters:{cart:function(t){return t.cart},order:function(t){return t.order}}},E=(o("ac6a"),{strict:!0,namespaced:!0,state:{messages:[]},actions:{updateMessage:function(t,e){var o=e.message,n=e.status,a=Math.floor(new Date/1e3);t.commit("MESSAGES",{message:o,status:n,timestamp:a}),t.dispatch("removeMessageWithTiming",a)},removeMessageWithTiming:function(t,e){setTimeout(function(){t.state.messages.forEach(function(o,n){o.timestamp===e&&t.commit("REMOVEMESSAGE",n)})},5e3)},message:function(t,e){var o="success",n=e.data.message;e.data.success||(o="danger"),t.dispatch("updateMessage",{message:n,status:o})}},mutations:{MESSAGES:function(t,e){t.messages.push(e)},REMOVEMESSAGE:function(t,e){t.messages.splice(e,1)}},getters:{messages:function(t){return t.messages}}}),y=o("1157"),S=o.n(y),T={strict:!0,namespaced:!0,state:{products:[],pagination:{},imageUrl:"",orders:[],coupons:[]},actions:{getProducts:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/products?page=").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.get(o).then(function(e){console.log(e.data),t.commit("PRODUCTS",e.data.products),t.commit("PAGINATION",e.data.pagination),t.commit("LOADING",!1,{root:!0})})},updataProduct:function(t,e){var o=e.httpMethod,n=e.tempProduct;t.commit("LOADING",!0,{root:!0}),S()("#productModal").modal("hide");var a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/product");"put"===o&&(a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/product/").concat(n.id)),console.log(o,"put"===o,a,n),c.a[o](a,{data:n}).then(function(e){e.data.success?t.dispatch("getProducts"):(t.dispatch("getProducts"),console.log("新增失敗"))})},delProduct:function(t,e){S()("#delProductModal").modal("hide"),t.commit("LOADING",!0,{root:!0});var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/product/").concat(e.id);c.a.delete(o).then(function(e){console.log(e.data),t.dispatch("getProducts")})},uploadFile:function(t,e){var o=new FormData;o.append("file-to-upload",e);var n="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/upload");return t.commit("FILEUPLOADING",!0,{root:!0}),c.a.post(n,o,{header:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e.data),e.data.success?t.commit("IMAGEURL",e.data.imageUrl):t.dispatch("alertModules/message",e,{root:!0}),t.commit("FILEUPLOADING",!1,{root:!0})})},getOrders:function(t,e){var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/orders?page=").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.get(o).then(function(e){console.log(e.data),t.commit("ORDERS",e.data.orders),t.commit("PAGINATION",e.data.pagination),t.commit("LOADING",!1,{root:!0})})},signout:function(){var t="".concat("https://vue-course-api.herokuapp.com","/logout");c.a.post(t).then(function(t){t.data.success&&L.push("/signin")})},getCoupons:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/coupons?page=").concat(e);t.commit("LOADING",!0,{root:!0}),c.a.get(o).then(function(e){console.log(e.data),t.commit("COUPONS",e.data.coupons),t.commit("PAGINATION",e.data.pagination),t.commit("LOADING",!1,{root:!0})})},updateCoupon:function(t,e){var o=e.httpMethod,n=e.tempCoupon;t.commit("LOADING",!0,{root:!0}),S()("#couponModal").modal("hide");var a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/coupon");"put"===o&&(a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/coupon/").concat(n.id)),c.a[o](a,{data:n}).then(function(e){e.data.success||console.log("新增失敗"),t.dispatch("getCoupons")})},delCoupons:function(t,e){S()("#delcouponModal").modal("hide"),t.commit("LOADING",!0,{root:!0});var o="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/admin/coupon/").concat(e.id);c.a.delete(o).then(function(e){t.dispatch("getCoupons")})}},mutations:{PRODUCTS:function(t,e){t.products=e},PAGINATION:function(t,e){t.pagination=e},IMAGEURL:function(t,e){t.imageUrl=e},ORDERS:function(t,e){t.orders=e},COUPONS:function(t,e){t.coupons=e}},getters:{products:function(t){return t.products},pagination:function(t){return t.pagination},imageUrl:function(t){return t.imageUrl},orders:function(t){return t.orders},coupons:function(t){return t.coupons}}};n["a"].use(g["a"]);var w=new g["a"].Store({strict:!0,state:{isLoading:!1,status:{loadingItem:"",fileUploading:!1}},actions:{},mutations:{LOADING:function(t,e){t.isLoading=e},LOADINGITEM:function(t,e){t.status.loadingItem=e},FILEUPLOADING:function(t,e){t.status.fileUploading=e}},modules:{productsModules:C,cartModules:M,alertModules:E,adminModules:T},getters:{isLoading:function(t){return t.isLoading},status:function(t){return t.status}}});n["a"].component("Loading",s.a),n["a"].filter("currency",P),n["a"].filter("date",G),n["a"].use(g["a"]),c.a.defaults.withCredentials=!0,n["a"].config.productionTip=!1,n["a"].use(u.a,c.a),n["a"].use(f.a),n["a"].use(h["a"]);var z=new h["a"]({locale:"zhTW"});n["a"].use(d["a"],{events:"input|blur",i18n:z,dictionary:{zhTW:m.a}}),new n["a"]({router:L,store:w,render:function(t){return t(D)}}).$mount("#app"),L.beforeEach(function(t,e,o){if(t.meta.requiresAuth){var n="".concat("https://vue-course-api.herokuapp.com","/api/user/check");c.a.post(n).then(function(t){t.data.success?o():o({path:"/login"})})}else o()})},"5c0b":function(t,e,o){"use strict";var n=o("5e27"),a=o.n(n);a.a},"5e27":function(t,e,o){}});
//# sourceMappingURL=app.14135d9b.js.map